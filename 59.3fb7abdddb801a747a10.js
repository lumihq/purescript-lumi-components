(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{iZ0T:function(e,t,a){"use strict";var n,r,i,u,l=a("NL7e"),o=a("jPEo"),d=a("lapV"),s=a("Z/IS"),c=a("CO8c"),f=a("POE8"),p=a("5a5/"),v=a("XSw5"),m=a("ll6l"),y=a("gK7E"),h=a("H2/w"),w=a("W+DG"),b=a("YfR1"),g=a("+rx9"),A=a("a0EN"),U=a("IHIf"),B=a("VWsW"),I=a("2+07"),F=a("+O+U"),k=a("aNND"),C=a("5JIH"),x=a("SZBU"),E=a("6g2T"),S=a("5L+5"),M=a("ErWj"),N=a("+0be"),q=a("pMgY"),O=a("agFx"),L=a("7HZk"),_=a("sfHK"),z=a("avNA"),R=a("z85V"),T=a("O43b"),H=a("ZR40"),J=function(){function e(){}return e.value=new e,e}(),W=function(){function e(e){this.value0=e}return e.create=function(t){return new e(t)},e}(),Z=function(){function e(e){this.value0=e}return e.create=function(t){return new e(t)},e}(),K=function(){function e(e){this.value0=e}return e.create=function(t){return new e(t)},e}(),P=function(){function e(e){this.value0=e}return e.create=function(t){return new e(t)},e}(),V=function(){function e(){}return e.value=new e,e}(),j=function(){function e(e){this.value0=e}return e.create=function(t){return new e(t)},e}(),D=C.runEffectFn2(F.log),Y=L.createComponent("UploadExample"),G=(n=function(e){return function(t){if(t instanceof J)return l.pure(A.applicativeEffect)(g.unit);if(t instanceof W)return e.setState((function(e){return{readonly:t.value0,startUpload:e.startUpload,avatar:e.avatar,files:e.files,images:e.images}}));if(t instanceof Z)return e.setStateThen((function(e){return{images:t.value0,files:e.files,avatar:e.avatar,readonly:e.readonly,startUpload:e.startUpload}}))(D("value:")(t.value0));if(t instanceof K)return e.setStateThen((function(e){return{images:e.images,files:t.value0,avatar:e.avatar,readonly:e.readonly,startUpload:e.startUpload}}))(D("value:")(t.value0));if(t instanceof P)return e.setStateThen((function(e){return{images:e.images,files:e.files,avatar:t.value0,readonly:e.readonly,startUpload:e.startUpload}}))(D("value:")(t.value0));if(t instanceof V)return U.launchAff_(h.maybe(m.map(U.functorAff)(j.create)(B.new(g.unit)))((a=m.map(U.functorAff)(v.const(J.value)),n=B.tryPut(g.unit),function(e){return a(n(e))}))(e.state.startUpload));var a,n;if(t instanceof j)return e.setState((function(e){return{readonly:e.readonly,startUpload:new h.Just(t.value0),avatar:e.avatar,files:e.files,images:e.images}}));throw new Error("Failed pattern match at Lumi.Components.Examples.Upload (line 57, column 17 - line 87, column 52): "+[t.constructor.name])}},r=o.bind(U.bindAff)(I.liftEffect(U.monadEffectAff)(k.randomRange(100)(700)))((function(e){return U.delay(e)})),i=function(e){return function(t){var a=y.round(H.size(t)),n={totalBytes:a,uploadedBytes:0};return o.discard(o.discardUnit)(U.bindAff)(r)((function(){return o.discard(o.discardUnit)(U.bindAff)(d.emit(e)(n))((function(){return o.discard(o.discardUnit)(U.bindAff)(r)((function(){return o.discard(o.discardUnit)(U.bindAff)(d.emit(e)({totalBytes:n.totalBytes,uploadedBytes:f.div(f.euclideanRingInt)(a)(8)}))((function(){return o.discard(o.discardUnit)(U.bindAff)(r)((function(){return o.discard(o.discardUnit)(U.bindAff)(d.emit(e)({totalBytes:n.totalBytes,uploadedBytes:f.div(f.euclideanRingInt)(a)(2)}))((function(){return o.discard(o.discardUnit)(U.bindAff)(r)((function(){return o.discard(o.discardUnit)(U.bindAff)(d.emit(e)({totalBytes:n.totalBytes,uploadedBytes:a}))((function(){return d.close(e)(l.pure(c.applicativeEither)(O.FileId(H.name(t))))}))}))}))}))}))}))}))}))}},u={images:[],files:[],avatar:h.Nothing.value,readonly:!1,startUpload:h.Nothing.value},L.make()(Y)({initialState:u,didMount:function(e){return U.launchAff_(m.map(U.functorAff)((t=n(e),function(e){return t(j.create(e))}))(B.empty));var t},render:function(e){return E.column_([E.column({style:R.css({maxWidth:500,padding:"20px 0"}),children:[N.labeledField({label:_.text("Readonly"),value:M.input({type:M.switch.type,autoComplete:M.switch.autoComplete,autoFocus:M.switch.autoFocus,checked:e.state.readonly?M.On.value:M.Off.value,disabled:M.switch.disabled,max:M.switch.max,min:M.switch.min,step:M.switch.step,name:M.switch.name,onBlur:M.switch.onBlur,onChange:T.handler(z.targetChecked)((c=n(e),f=h.fromMaybe(!1),function(e){return c(W.create(f(e)))})),onFocus:M.switch.onFocus,onKeyUp:M.switch.onKeyUp,pattern:M.switch.pattern,placeholder:M.switch.placeholder,readOnly:M.switch.readOnly,required:M.switch.required,size:M.switch.size,style:M.switch.style,testId:M.switch.testId,value:M.switch.value,variant:M.switch.variant}),validationError:h.Nothing.value,required:N.Neither.value,forceTopLabel:!1,style:R.css({})})]}),q.h2_("Images"),S.example(E.column({style:R.css({alignSelf:"stretch"}),children:[O.upload({allowMultiple:O.defaults.allowMultiple,backend:{fetch:function(e){return l.pure(U.applicativeAff)({id:e,name:e,previewUri:h.Nothing.value,readonly:!1})},remove:function(e){return l.pure(U.applicativeAff)(!0)},upload:function(e){return d.produceAff((function(t){return i(t)(e)}))}},disabled:O.defaults.disabled,name:O.defaults.name,onBlur:O.defaults.onBlur,onChange:(u=n(e),function(e){return u(Z.create(e))}),onClick:O.defaults.onClick,onFocus:O.defaults.onFocus,readonly:e.state.readonly,required:O.defaults.required,testId:O.defaults.testId,value:e.state.images,variant:O.Images.value})]})),q.h2_("Files"),S.example(E.column({style:R.css({alignSelf:"stretch"}),children:[O.upload({allowMultiple:O.defaults.allowMultiple,backend:{fetch:function(e){return l.pure(U.applicativeAff)({id:e,name:e,previewUri:h.Nothing.value,readonly:!1})},remove:function(e){return l.pure(U.applicativeAff)(!0)},upload:function(t){return d.produceAff((function(a){return o.discard(o.discardUnit)(U.bindAff)(p.foldMap(p.foldableMaybe)(U.monoidAff(w.monoidUnit))(B.read)(e.state.startUpload))((function(){return o.discard(o.discardUnit)(U.bindAff)(m.void(U.functorAff)(p.foldMap(p.foldableMaybe)(U.monoidAff(h.monoidMaybe(b.semigroupUnit)))(B.tryTake)(e.state.startUpload)))((function(){return i(a)(t)}))}))}))}},disabled:O.defaults.disabled,name:O.defaults.name,onBlur:O.defaults.onBlur,onChange:(r=n(e),function(e){return r(K.create(e))}),onClick:function(e){return h.Just.create(F.log(e))},onFocus:O.defaults.onFocus,readonly:e.state.readonly,required:O.defaults.required,testId:O.defaults.testId,value:e.state.files,variant:O.Files.value}),x.button({accessibilityLabel:x.primary.accessibilityLabel,color:x.primary.color,onPress:T.handler_(n(e)(V.value)),size:x.primary.size,style:x.primary.style,testId:x.primary.testId,title:"Upload",type:x.primary.type,buttonState:x.primary.buttonState})]})),q.h2_("Avatar"),S.example(E.column({style:R.css({alignSelf:"stretch"}),children:[O.upload({allowMultiple:O.defaults.allowMultiple,backend:{fetch:function(e){return l.pure(U.applicativeAff)({id:e,name:e,previewUri:h.Nothing.value,readonly:!1})},remove:function(e){return l.pure(U.applicativeAff)(!0)},upload:function(e){return d.produceAff((function(t){return i(t)(e)}))}},disabled:O.defaults.disabled,name:O.defaults.name,onBlur:O.defaults.onBlur,onChange:(a=n(e),function(e){return a(P.create(s.head(e)))}),onClick:O.defaults.onClick,onFocus:O.defaults.onFocus,readonly:e.state.readonly,required:O.defaults.required,testId:O.defaults.testId,value:h.maybe([])(l.pure(l.applicativeArray))(e.state.avatar),variant:O.Avatar.value})]})),q.h2_("Logo"),S.example(E.column({style:R.css({alignSelf:"stretch"}),children:[O.upload({allowMultiple:O.defaults.allowMultiple,backend:{fetch:function(e){return l.pure(U.applicativeAff)({id:e,name:e,previewUri:h.Nothing.value,readonly:!1})},remove:function(e){return l.pure(U.applicativeAff)(!0)},upload:function(e){return d.produceAff((function(t){return i(t)(e)}))}},disabled:O.defaults.disabled,name:O.defaults.name,onBlur:O.defaults.onBlur,onChange:(t=n(e),function(e){return t(P.create(s.head(e)))}),onClick:O.defaults.onClick,onFocus:O.defaults.onFocus,readonly:e.state.readonly,required:O.defaults.required,testId:O.defaults.testId,value:h.maybe([])(l.pure(l.applicativeArray))(e.state.avatar),variant:O.Logo.value})]}))]);var t,a,r,u,c,f}})(g.unit));e.exports={component:Y,NoOp:J,SetReadonly:W,ImageEx:Z,FileEx:K,AvatarEx:P,StartUpload:V,InitializeUploadBuffer:j,docs:G,debug:D}}}]);